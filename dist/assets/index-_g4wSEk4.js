(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const l=document.getElementById("folderPath"),v=document.getElementById("browseButton"),w=document.getElementById("addFavoriteButton"),u=document.getElementById("favoritePathsList"),E=document.getElementById("amountInput"),y=document.getElementById("selectRandomButton"),m=document.getElementById("selectedFilesList"),f=document.getElementById("filter-chips-container");let c=[],r=[];document.querySelectorAll(".collapse-button").forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement.nextElementSibling;t.classList.toggle("collapsed"),e.textContent=t.classList.contains("collapsed")?"+":"-"})});v.addEventListener("click",async()=>{const e=await window.electronAPI.openFolder();e&&(l.value=e,h(e))});async function h(e){try{const t=await window.electronAPI.getFiles(e);F(t)}catch(t){console.error("Error updating filter chips:",t)}}w.addEventListener("click",()=>{const e=l.value;e&&!c.includes(e)&&(c.push(e),g(),p())});u.addEventListener("click",e=>{if(e.target.tagName==="SPAN"){const t=e.target.textContent;l.value=t,h(t)}if(e.target.tagName==="BUTTON"){const t=e.target.parentElement.querySelector("span").textContent;c=c.filter(n=>n!==t),g(),p()}});y.addEventListener("click",async()=>{const e=l.value,t=parseInt(E.value,10);if(!e||isNaN(t)||t<=0){alert("Please provide a valid folder path and a positive number of files to select.");return}try{const n=await window.electronAPI.getFiles(e);if(n.length===0){alert("The selected folder is empty.");return}const o=r.length===0?n:n.filter(s=>r.includes(s.slice(s.lastIndexOf("."))));if(o.length===0){alert("No files match the current filter.");return}const i=x(o,t);L(i,e)}catch(n){console.error("Error selecting random files:",n),alert(`Error: ${n.message}`)}});function p(){u.innerHTML="",c.forEach(e=>{const t=document.createElement("li");t.innerHTML=`<span>${e}</span> <button>‚ùå</button>`,u.appendChild(t)})}async function L(e,t){m.innerHTML="";const n=r.length===0?e:e.filter(o=>r.includes(o.slice(o.lastIndexOf("."))));for(const o of n){const i=document.createElement("li"),s=await window.electronAPI.joinPath(t,o),a=await window.electronAPI.readFile(s);let d="";a&&(I(o)?d=`<img src="${a}" alt="${o}" style="max-width: 100px; max-height: 100px;" />`:P(o)&&(d=`<video src="${a}" controls style="max-width: 100px; max-height: 100px;"></video>`)),i.innerHTML=`
      <div class="media-preview">${d}</div>
      <div class="file-info">
        <span>${o}</span>
        <button class="open-file-button" data-path="${s}">Open</button>
      </div>
    `,m.appendChild(i)}document.querySelectorAll(".open-file-button").forEach(o=>{o.addEventListener("click",i=>{const s=i.target.getAttribute("data-path");window.electronAPI.openFile(s)})})}function I(e){const t=[".jpg",".jpeg",".png",".gif",".bmp",".webp"],n=e.slice(e.lastIndexOf(".")).toLowerCase();return t.includes(n)}function P(e){const t=[".mp4",".webm",".ogg",".mov"],n=e.slice(e.lastIndexOf(".")).toLowerCase();return t.includes(n)}function x(e,t){return e.sort(()=>.5-Math.random()).slice(0,t)}function F(e){f.innerHTML="",[...new Set(e.map(n=>n.slice(n.lastIndexOf("."))))].forEach(n=>{const o=document.createElement("div");o.classList.add("filter-chip"),o.textContent=n,o.dataset.ext=n,r.includes(n)&&o.classList.add("active"),f.appendChild(o)})}f.addEventListener("click",e=>{if(e.target.classList.contains("filter-chip")){const t=e.target.dataset.ext;r.includes(t)?(r=r.filter(n=>n!==t),e.target.classList.remove("active")):(r.push(t),e.target.classList.add("active"))}});function g(){window.electronAPI.saveData({favoritePaths:c})}async function b(){const e=await window.electronAPI.loadData();e&&e.favoritePaths&&(c=e.favoritePaths,p())}b();
